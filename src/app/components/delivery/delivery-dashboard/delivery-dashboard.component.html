<div class="delivery-wrapper">
  <!-- Page Title -->
  <h2 class="page-title">Delivery Assignments</h2>

  <!-- Success and Error Notifications -->
  <div *ngIf="successMessage" class="notification success">
    <div class="notification-icon">✓</div>
    <span>{{ successMessage }}</span>
    <button class="close-button" (click)="clearSuccessMessage()">×</button>
  </div>

  <div *ngIf="errorMessage" class="notification error">
    <div class="notification-icon">!</div>
    <span>{{ errorMessage }}</span>
    <button class="close-button" (click)="clearErrorMessage()">×</button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <p>Loading your deliveries...</p>
    <div class="spinner"></div>
  </div>

  <!-- Deliveries List -->
  <div *ngIf="!isLoading && assignedDeliveries.length > 0" class="delivery-grid">
    <div *ngFor="let delivery of assignedDeliveries" class="card-delivery">
      <div class="card-header">
        <h3>Delivery #{{ shortenId(delivery.id) }}</h3>
        <span class="badge">{{ delivery.status }}</span>
      </div>

      <div class="card-body">
        <p><strong>Pickup:</strong> {{ delivery.pickupAddress }}</p>
        <p><strong>Delivery:</strong> {{ delivery.deliveryAddress }}</p>
        <p><strong>Package:</strong> {{ delivery.packageDescription }} ({{ delivery.packageWeight }} kg)</p>
        <p><strong>Client:</strong> {{ delivery.clientId }}</p>
      </div>

      <div class="card-actions">
        <button (click)="acceptDelivery(delivery.id)" class="accept-button" [disabled]="isProcessing(delivery.id)">
          <ng-container *ngIf="isProcessing(delivery.id); else acceptLabel">Processing...</ng-container>
          <ng-template #acceptLabel>Accept</ng-template>
        </button>

        <button (click)="rejectDelivery(delivery.id)" class="reject-button" [disabled]="isProcessing(delivery.id)">
          <ng-container *ngIf="isProcessing(delivery.id); else rejectLabel">Processing...</ng-container>
          <ng-template #rejectLabel>Reject</ng-template>
        </button>
      </div>
    </div>
  </div>

  <!-- No Deliveries -->
  <div *ngIf="!isLoading && assignedDeliveries.length === 0" class="no-deliveries">
    <p>No deliveries are currently assigned to you. Check back later!</p>
  </div>
</div>
