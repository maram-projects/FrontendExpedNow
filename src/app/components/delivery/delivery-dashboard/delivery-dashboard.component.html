<div class="delivery-container">
  <!-- عنوان الصفحة -->
  <h2>Delivery Assignments</h2>
  
  <!-- رسائل النجاح والخطأ بدون *ngIf -->
  <div [hidden]="!successMessage" class="alert success-alert">
    <span class="alert-icon">✓</span>
    <span>{{successMessage}}</span>
    <button class="close-btn" (click)="clearSuccessMessage()">×</button>
  </div>
  
  <div [hidden]="!errorMessage" class="alert error-alert">
    <span class="alert-icon">!</span>
    <span>{{errorMessage}}</span>
    <button class="close-btn" (click)="clearErrorMessage()">×</button>
  </div>

  <!-- حالة التحميل -->
  <div [hidden]="!isLoading" class="loading">
    <p>Loading your deliveries...</p>
  </div>

  <!-- حالة وجود طلبات -->
  <div [hidden]="isLoading || assignedDeliveries.length === 0" class="delivery-list">
    <div *ngFor="let delivery of assignedDeliveries" class="delivery-card">
      <div class="delivery-header">
        <h3>Delivery #{{shortenId(delivery.id)}}</h3>
        <span class="status-badge">{{delivery.status}}</span>
      </div>

      <div class="delivery-details">
        <p><strong>Pickup:</strong> {{delivery.pickupAddress}}</p>
        <p><strong>Delivery:</strong> {{delivery.deliveryAddress}}</p>
        <p><strong>Package:</strong> {{delivery.packageDescription}} ({{delivery.packageWeight}} kg)</p>
        <p><strong>client:</strong> {{delivery.clientId}}</p>
      </div>

      <div class="delivery-actions">
        <button 
          (click)="acceptDelivery(delivery.id)" 
          class="accept-btn" 
          [disabled]="isProcessing(delivery.id)">
          <span [hidden]="!isProcessing(delivery.id)">Processing...</span>
          <span [hidden]="isProcessing(delivery.id)">Accept</span>
        </button>
        <button 
          (click)="rejectDelivery(delivery.id)" 
          class="reject-btn" 
          [disabled]="isProcessing(delivery.id)">
          <span [hidden]="!isProcessing(delivery.id)">Processing...</span>
          <span [hidden]="isProcessing(delivery.id)">Reject</span>
        </button>
      </div>
    </div>
  </div>

  <!-- حالة عدم وجود طلبات -->
  <div [hidden]="isLoading || assignedDeliveries.length > 0" class="no-deliveries">
    <p>No deliveries are currently assigned to you. Check back later!</p>
  </div>
</div>