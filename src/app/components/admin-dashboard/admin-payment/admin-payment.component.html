<!-- admin-payment.component.html -->
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5>Payment Management</h5>
      <div class="d-flex gap-2">
        <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchTerm" (input)="filterPayments()">
        <select class="form-select" [(ngModel)]="selectedStatus" (change)="filterPayments()">
          <option value="ALL">All Statuses</option>
          <option *ngFor="let status of getEnumValues(PaymentStatus)" [value]="status">{{status}}</option>
        </select>
      </div>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>ID</th>
              <th>Client</th>
              <th>Amount</th>
              <th>Method</th>
              <th>Status</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let payment of filteredPayments">
              <td>{{payment.id | shorten: 8}}</td>
              <td>{{payment.clientId | shorten: 8}}</td>
              <td>{{payment.finalAmountAfterDiscount | currency:'TND'}}</td>
              <td>{{payment.method}}</td>
              <td><span [class]="getStatusClass(payment.status)">{{payment.status}}</span></td>
              <td>{{payment.paymentDate | date:'medium'}}</td>
              <td>
                <button *ngIf="payment.status === PaymentStatus.PAID" class="btn btn-sm btn-danger" 
                        (click)="refundPayment(payment.id)">
                  Refund
                </button>
                <a [routerLink]="['/admin/payments', payment.id]" class="btn btn-sm btn-info ms-2">
                  Details
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>